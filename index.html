<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>×”×¨×©××” - ××©×¤×—×”</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container auth-container">
    <h1>×”×¨×©××”</h1>
    <form id="registerForm">
      <label for="username">×©× ××©×ª××©:</label>
      <input type="text" id="username" required />

      <label for="password">×¡×™×¡××”:</label>
      <input type="password" id="password" required />

      <label for="role">×‘×—×¨ ×¡×•×’ ××©×ª××©:</label>
      <select id="role" required>
        <option value="child">×™×œ×“ ğŸ‘¦</option>
        <option value="guest">××•×¨×— ğŸ‘¤</option>
        <option value="admin">×× ×”×œ ğŸ§‘â€ğŸ’¼</option>
      </select>

      <div id="adminCodeContainer" style="display:none;">
        <label for="adminCode">×§×•×“ ×¡×•×“×™ ×œ×× ×”×œ:</label>
        <input type="password" id="adminCode" placeholder="×”×›× ×¡ ×§×•×“ ×¡×•×“×™" />
      </div>

      <button type="submit">×”×¨×©×</button>
    </form>

    <p>×›×‘×¨ ×¨×©×•×? <a href="login.html">×”×ª×—×‘×¨ ×›××Ÿ</a></p>
    <div id="message" class="message"></div>
  </div>

  <script src="auth.js"></script>

  <!-- âœ… ×”×•×¡×¤×”: ×—×™×‘×•×¨ ×œ-Firebase ×•×©××™×¨×” ×‘×¢× ×Ÿ -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDx7yFK3BkGx4zD_NWSO0Q8bYdJthIrK8k",
  authDomain: "family-2800b.firebaseapp.com",
  projectId: "family-2800b",
  storageBucket: "family-2800b.firebasestorage.app",
  messagingSenderId: "709405996945",
  appId: "1:709405996945:web:5f9513c58fd5445c578c30",
  measurementId: "G-SHRHHQQ10K"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

   

    // ğŸ§¾ ×©××™×¨×” ×©×œ ××©×ª××© ×—×“×© ×‘-Firestore
    const form = document.getElementById("registerForm");
    const messageBox = document.getElementById("message");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();
      const role = document.getElementById("role").value;
      const adminCode = document.getElementById("adminCode").value.trim();

      if (role === "admin" && adminCode !== "1234") {
        messageBox.textContent = "âŒ ×§×•×“ ×× ×”×œ ×©×’×•×™!";
        messageBox.style.color = "red";
        return;
      }

      try {
        await addDoc(collection(db, "users"), {
          username,
          password,
          role,
          createdAt: new Date()
        });

        messageBox.textContent = "âœ… × ×¨×©××ª ×‘×”×¦×œ×—×”!";
        messageBox.style.color = "green";
        form.reset();
      } catch (err) {
        console.error(err);
        messageBox.textContent = "×©×’×™××” ×‘×©××™×¨×” ×œ×©×¨×ª!";
        messageBox.style.color = "red";
      }
    });
  </script>
</body>
</html>

